‚úÖ 1. –î–ï –¢–ï–ü–ï–† –ñ–ò–í–ï –ü–û–°–¢–ì–†–ï–°? (–í–ê–ñ–õ–ò–í–û!)
–¢–∏ –±—ñ–ª—å—à–µ –ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—à –ª–æ–∫–∞–ª—å–Ω–∏–π Docker Postgres.

–£ —Ç–µ–±–µ –≤ .env —Å—Ç–æ—ó—Ç—å –æ—Å—å —Ç–∞–∫–µ:

SQLALCHEMY_DATABASE_URL=postgresql://neondb_owner:npg_8LmWbOHC3syT@ep-round-snow-adrv766l-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require


–¶–µ –æ–∑–Ω–∞—á–∞—î:

üî• –¢–≤–æ—è –±–∞–∑–∞ —Ç–µ–ø–µ—Ä —É Neon.tech (PostgreSQL-as-a-Service)

‚Äî –ù–ï –≤ Docker,
‚Äî –ù–ï —É Fly.io,
‚Äî –ù–ï –ª–æ–∫–∞–ª—å–Ω–æ,
–∞ –Ω–∞ —Ö–º–∞—Ä–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—ñ Neon.

–î–µ —ó—ó –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏:

üëâ –£ –∫–∞–±—ñ–Ω–µ—Ç—ñ Neon:
https://console.neon.tech

 ### –ü–µ—Ä–µ–≤—ñ—Ä –±—É–¥—å –ª–∞—Å–∫–∞ —Å–≤–æ—é –ø–æ—à—Ç—É!!!
–¢–∞–º —Ç–∏ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—à:

dashboard –ø—Ä–æ—î–∫—Ç—É

—Ç–≤–æ—é –ë–î

—Ç–∞–±–ª–∏—Ü—ñ

–º–æ–∂–µ—à –∑–∞–ø—É—Å–∫–∞—Ç–∏ SQL-–∑–∞–ø–∏—Ç–∏

‚úÖ 2. –î–ï –¢–ï–ü–ï–† –ñ–ò–í–ï REDIS?

–£ —Ç–µ–±–µ —Å—Ç–æ—ó—Ç—å:

REDIS_URL=redis://default:a9074adb8fb547d996908034247e4ff0@fly-cold-dew-5968.upstash.io:6379


–¶–µ –æ–∑–Ω–∞—á–∞—î:

üî• Redis ‚Üí Upstash (—á–µ—Ä–µ–∑ Fly.io)

Upstash ‚Äî —Ü–µ cloud Redis, —è–∫–∏–π —ñ–Ω—Ç–µ–≥—Ä—É—î—Ç—å—Å—è –∑ Fly.
–¢–æ–±—Ç–æ Redis —Ç–µ–ø–µ—Ä –Ω–µ –≤ Docker, –∞ –≤ —Ö–º–∞—Ä—ñ Upstash.

–î–µ –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ Redis:

üëâ Upstash Dashboard
https://console.upstash.com

–¢–∞–º —Ç–∏ –ø–æ–±–∞—á–∏—à:

—Å–≤—ñ–π Redis instance

–∫–ª—é—á

—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

–º–æ–∂–Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –¥–∞–Ω—ñ

‚úÖ 3. –©–û –¢–ï–ü–ï–† –ó –î–û–ö–ï–†–û–ú?

–ü—ñ—Å–ª—è –¥–µ–ø–ª–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–º—ñ–Ω–∏–ª–∞—Å—è:

–î–æ –¥–µ–ø–ª–æ—é:
–ª–æ–∫–∞–ª—å–Ω–æ:
  - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä app
  - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä postgres
  - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä redis

–ü—ñ—Å–ª—è –¥–µ–ø–ª–æ—é –Ω–∞ Fly.io:
Fly.io:
  - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä web (—Ç–≤—ñ–π fastapi/–±–æ—Ç/–¥–æ–¥–∞—Ç–æ–∫)
  - –ù–Ü–Ø–ö–û–ì–û postgres —É Fly
  - –ù–Ü–Ø–ö–û–ì–û redis —É Fly

Cloud:
  - PostgreSQL —É Neon
  - Redis –≤ Upstash

‚úÖ 4. –ê–ª–µ —è–∫ —Ç–µ–ø–µ—Ä –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è backend?

–¢–≤—ñ–π –∫–æ–¥ –ø—Ä–æ—Å—Ç–æ —á–∏—Ç–∞—î .env
—ñ —á–µ—Ä–µ–∑ —Ü—ñ URL-–∏ –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ:

Neon Postgres –ø–æ https

Upstash Redis –ø–æ https

–ù—ñ—á–æ–≥–æ –¥–æ–¥–∞—Ç–∫–æ–≤–æ–≥–æ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ.

‚ùì 5. –ü–∏—Ç–∞–≤ –ø—Ä–æ Cloudinary ‚Äî —Ç–∞–∫, –≤—ñ–Ω —Ç–µ–∂ —É —Ö–º–∞—Ä—ñ
CLOUDINARY_NAME=
CLOUDINARY_API_KEY=
CLOUDINARY_API_SECRET=


Backend —Ç–µ–ø–µ—Ä –ø—Ä–∞—Ü—é—î —Ç–∞–∫:

üìå –û—Ç—Ä–∏–º—É—î —Ñ–∞–π–ª ‚Üí –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –≤ Cloudinary ‚Üí Cloudinary –ø–æ–≤–µ—Ä—Ç–∞—î URL ‚Üí –∑–∞–ø–∏—Å—É—î—Ç—å—Å—è –≤ Postgres (Neon).

üìå 6. –í–∞–∂–ª–∏–≤–∞ –¥–µ—Ç–∞–ª—å –ø—Ä–æ .env —ñ .gitignore

üéØ –Ø–∫—â–æ —Ç–∏ –¥–µ–ø–ª–æ—ó–≤ –Ω–∞ Fly.io,
.env –§–Ü–ó–ò–ß–ù–û –ù–ï –º–∞—î –ª–µ–∂–∞—Ç–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó.

–ù–∞ Fly.io —Å–µ–∫—Ä–µ—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —Ç–∞–∫:

fly secrets set SQLALCHEMY_DATABASE_URL="..." REDIS_URL="..."


–Ü —ó—Ö –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏:

fly secrets list


–¢–µ, —â–æ .env —É .gitignore ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

üî• –í–ò–°–ù–û–í–û–ö
–†–µ—Å—É—Ä—Å	–î–µ –∂–∏–≤–µ	–î–µ –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏
Postgres	Neon.tech	https://console.neon.tech

Redis	Upstash (—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Fly.io)	https://console.upstash.com

Cloudinary	Cloudinary	https://cloudinary.com/console

Backend	Fly.io	https://fly.io/dashboard

–û–∫! –î–∞–≤–∞–π –ø—Ä–æ–π–¥–µ–º–æ –ø–æ–≤–Ω–∏–π —Ü–∏–∫–ª –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∏ —Ç–∞ –∑–∞–ø—É—Å–∫—É —Ç–≤–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É –Ω–∞ Fly.io –∑ Neon PostgreSQL, Upstash Redis, –º—ñ–≥—Ä–∞—Ü—ñ—è–º–∏, –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é —Å–µ–∫—Ä–µ—Ç—ñ–≤ —Ç–∞ –∑–∞–ø—É—Å–∫–æ–º –º–∞—à–∏–Ω–∏.

–Ø —Ä–æ–∑–ø–∏—à—É –≤—Å–µ –ø–æ–∫—Ä–æ–∫–æ–≤–æ —Ç–∞–∫, –Ω—ñ–±–∏ –º–∏ —Ä–æ–±–∏–º–æ –¥–µ–ø–ª–æ–π –∑ –Ω—É–ª—è ‚Äî —Ç–∏ –ø—Ä–æ—Å—Ç–æ –≤–∏–∫–æ–Ω—É—î—à –∫–æ–º–∞–Ω–¥–∏, —ñ –≤ –∫—ñ–Ω—Ü—ñ —Ç–≤—ñ–π –±–µ–∫–µ–Ω–¥ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ.

‚úÖ –ö–†–û–ö 1. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —â–æ –≤ —Ç–µ–±–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ Fly CLI

–£ —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ:

flyctl version

–Ø–∫—â–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ ‚Äî –≤—Å—Ç–∞–Ω–æ–≤–∏:

macOS:

brew install flyctl

(. ### –û—Ç–∂–µ, Fly CLI –í –ù–∞—Ç–∞—à–∏  Commit: dc05102e722132dbbc94449eaf2158a3180afaba BuildDate: 2025-11-19T18:44:43Z
Commit: dc05102e722132dbbc94449eaf2158a3180afaba BuildDate: 2025-11-19T18:44:43Z)

‚úÖ –ö–†–û–ö 2. –õ–æ–≥—ñ–Ω —É Fly.io
flyctl auth login


–í—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –±—Ä–∞—É–∑–µ—Ä ‚Äî –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏.

‚úÖ –ö–†–û–ö 3. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —â–æ —É —Ç–µ–±–µ —î –¥–æ–¥–∞—Ç–æ–∫ –Ω–∞ Fly.io
flyctl apps list


–¢–∞–º –º–∞—î –±—É—Ç–∏ —â–æ—Å—å —Ç–∏–ø—É:
cold-dew-5968 –∞–±–æ –Ω–∞–∑–≤–∞, —è–∫—É —Ç–∏ —Å—Ç–≤–æ—Ä—é–≤–∞–≤.

–Ø–∫—â–æ –Ω–µ–º–∞ ‚Äî —Å–∫–∞–∂–∏ –º–µ–Ω—ñ, —Å—Ç–≤–æ—Ä–∏–º–æ.

‚úÖ –ö–†–û–ö 4. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Ç–∞ –æ–Ω–æ–≤–ª—é—î–º–æ —Å–µ–∫—Ä–µ—Ç–∏ Fly.io

‚ÄºÔ∏è –í–∞–∂–ª–∏–≤–æ: —Ç–≤—ñ–π .env –ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è Fly.io.
–°–µ–∫—Ä–µ—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤—Ä—É—á–Ω—É.

–ö–æ–º–∞–Ω–¥–∞:
flyctl secrets list

üëâ –¢–µ–ø–µ—Ä –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Å–µ–∫—Ä–µ—Ç–∏ –≤—Ä—É—á–Ω—É:

‚ö†Ô∏è –ü—ñ–¥—Å—Ç–∞–≤ —Å–≤–æ—ó —Ä–µ–∞–ª—å–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è!

flyctl secrets set \
SQLALCHEMY_DATABASE_URL="postgresql://neondb_owner:npg_8LmWbOHC3syT@ep-round-snow-adrv766l-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require" \
REDIS_URL="redis://default:a9074adb8fb547d996908034247e4ff0@fly-cold-dew-5968.upstash.io:6379" \
SECRET_KEY="supersecret" \
ALGORITHM="HS256" \
ACCESS_TOKEN_EXPIRE_MINUTES="1440" \
EXPIRE_MINUTES="60" \
MAIL_USERNAME="fatsapiuser@meta.ua" \
MAIL_PASSWORD="pythonCourse2023" \
MAIL_FROM="fatsapiuser@meta.ua" \
MAIL_PORT="465" \
MAIL_SERVER="smtp.meta.ua" \
CLOUDINARY_NAME="dge51wq0x" \
CLOUDINARY_API_KEY="737787131673448" \
CLOUDINARY_API_SECRET="3buiINe9yi3Wj0UMEcZQLt1RvMo"


–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ:
flyctl secrets list

‚úÖ –ö–†–û–ö 5. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ PostgreSQL —É Neon

–ó–∞–π–¥–∏ —Å—é–¥–∏: https://console.neon.tech

–ü–µ—Ä–µ–≤—ñ—Ä:

–Ñ –±–∞–∑–∞?

–Ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á?

–Ñ connection string —Ç–∞–∫–∏–π, —è–∫ —É Fly secrets?

‚ùó –Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî —è –º–æ–∂—É –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–≤–æ—é —Å—Ç—Ä–æ–∫—É —Ç–∞ —Å—Ö–µ–º—É.

‚úÖ –ö–†–û–ö 6. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ Redis —É Upstash

–ó–∞–π–¥–∏ —Å—é–¥–∏: https://console.upstash.com

–£ –≤–∫–ª–∞–¥—Ü—ñ Redis –∑–Ω–∞–π–¥–∏ —Å–≤—ñ–π —ñ–Ω—Å—Ç–∞–Ω—Å.

–ü–µ—Ä–µ–≤—ñ—Ä, —á–∏ URL –∑–±—ñ–≥–∞—î—Ç—å—Å—è –∑ —Ç–≤–æ—ó–º:

redis://default:–ø–∞—Ä–æ–ª—å@host:6379


–•–æ—á–µ—à ‚Äî –º–æ–∂—É –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–ø–∏—Å–∞–Ω–∞ —Å–∞–º–∞ —Å—Ç—Ä–æ–∫–∞ Postgres, –∞–ª–µ –¥–ª—è —Ü—å–æ–≥–æ —Å–∫–∏–Ω—å —Å—é–¥–∏:

flyctl secrets list --decode

–ü–æ–¥–∏–≤–∏—Ç–∏—Å—è —Å–µ–∫—Ä–µ—Ç–∏ —É Fly.io —á–µ—Ä–µ–∑ SSH
1. –£–≤—ñ–π–¥–∏ –≤ –º–∞—à–∏–Ω—É:
flyctl ssh console --app photoshare-project-1

2. –£ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ –≤–≤–µ–¥–∏:
printenv | grep SQL
printenv | grep REDIS


–¢–∏ –ø–æ–±–∞—á–∏—à —Ä–µ–∞–ª—å–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è:

SQLALCHEMY_DATABASE_URL=postgresql://...

REDIS_URL=redis://...
–í–∏—Ö–æ–¥–∏–º–æ –∑ SSH

–£ —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ:

exit

‚úÖ –ö–†–û–ö 7. –ü—ñ–¥–Ω—ñ–º–∞—î–º–æ –º–∞—à–∏–Ω—É –Ω–∞ Fly.io
flyctl deploy


‚ö†Ô∏è –Ø–∫—â–æ —É —Ç–µ–±–µ –∫—Ä—É—Ç—è—Ç—å—Å—è —Å—Ç–∞—Ä—ñ –º–∞—à–∏–Ω–∏ —Ç–∞ –∑–∞–≤–∏—Å–ª—ñ —Å–µ—Ä–≤—ñ—Å–∏ ‚Äî —Å–∫–∞–∂–∏ –º–µ–Ω—ñ, —è –¥–æ–ø–æ–º–æ–∂—É —ó—Ö –≤–∏–¥–∞–ª–∏—Ç–∏.
–í–∏ —Å–∫–∞–∑–∞–ª–∏:

–¢–∏ –º–µ–Ω—ñ –Ω–∞–ø–∏—Å–∞–≤ –ø—ñ—Å–ª—è —Ç–æ–≥–æ —è–∫ —è –≤—Å—Ç–∞–≤–∏–ª–∞ —Å–µ–∫—Ä–µ—Ç–∏ –≤ –±–∞–∑—É
–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ:
flyctl secrets list

–£ —Ç–µ–±–µ –∑–∞—Ä–∞–∑ 2 –º–∞—à–∏–Ω–∏ –≤ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É photoshare-project-1:

‚úÖ –ú–∞—à–∏–Ω–∞ ‚Ññ1 (–ó–ê–ü–£–©–ï–ù–ê)
6839231f64de68   green-wood-352   started   app

–¶–µ —Ç–≤–æ—è –æ—Å–Ω–æ–≤–Ω–∞ —Ä–æ–±–æ—á–∞ –º–∞—à–∏–Ω–∞.
–á—ó –ù–ï –≤–∏–¥–∞–ª—è—î–º–æ.

‚ùå –ú–∞—à–∏–Ω–∞ ‚Ññ2 (–ó–£–ü–ò–ù–ï–ù–ê ‚Äî –º–æ–∂–Ω–∞ –≤–∏–¥–∞–ª–∏—Ç–∏)
d891699f747598   red-tree-7511   stopped   release_command

–¶–µ —Å—Ç–∞—Ä–∏–π release_command, —è–∫–∏–π –≤–∂–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω.
–ô–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–¥–∞–ª–∏—Ç–∏.

–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–π–≤–æ—ó –º–∞—à–∏–Ω–∏

–°–∫–æ–ø—ñ—é–π —ñ –≤–∏–∫–æ–Ω–∞–π:

flyctl machines destroy d891699f747598 --app photoshare-project-1 --force



‚úÖ –ö–†–û–ö 8. –í–∏–∫–æ–Ω—É—î–º–æ –º—ñ–≥—Ä–∞—Ü—ñ—ó (–≤–∞–∂–ª–∏–≤–æ!)

–¢–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—à Alembic? (–°—Ö–æ–∂–µ —â–æ —Ç–∞–∫.)

–¢–æ–¥—ñ:

flyctl ssh console


–í—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

alembic upgrade head


–Ø–∫—â–æ alembic –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ‚Äî —Å–∫–∞–∂–∏, –ø–æ–ø—Ä–∞–≤–∏–º–æ.

‚úÖ –ö–†–û–ö 9. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –ª–æ–≥–∏ –±–µ–∫–µ–Ω–¥–∞
flyctl logs


–¢–∞–º —Ç–∏ –º–∞—î—à –ø–æ–±–∞—á–∏—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Postgres —ñ Redis:

Connected to Postgres...
Connected to Redis...


–Ø–∫—â–æ —Ç–∞–º –±—É–¥–µ –ø–æ–º–∏–ª–∫–∞ ‚Äî —è –¥–æ–ø–æ–º–æ–∂—É —Ä–æ–∑—ñ–±—Ä–∞—Ç–∏.

1Ô∏è‚É£ –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —á–µ—Ä–µ–∑ psql

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ URL –∑ .env:

SQLALCHEMY_DATABASE_URL=postgresql://neondb_owner:npg_8LmWbOHC3syT@ep-round-snow-adrv766l-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require


–ö–æ–º–∞–Ω–¥–∞:

psql "postgresql://neondb_owner:npg_8LmWbOHC3syT@ep-round-snow-adrv766l-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require"


–Ø–∫—â–æ –≤—Å–µ –ø—ñ–¥–∫–ª—é—á–∏–ª–æ—Å—å ‚Äî –æ—Ç—Ä–∏–º–∞—î—à –ø—Ä–æ–º–ø—Ç:

neondb=>

2Ô∏è‚É£ –ü–µ—Ä–µ–≥–ª—è–¥ —É—Å—ñ—Ö —Ç–∞–±–ª–∏—Ü—å
\dt


–Ø–∫—â–æ —Ö–æ—á–µ—à –ø–æ–±–∞—á–∏—Ç–∏ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ–π —Å—Ö–µ–º—ñ (—á–∞—Å—Ç–æ public):

\dt public.*

3Ô∏è‚É£ –ü–µ—Ä–µ–≥–ª—è–¥ –¥–∞–Ω–∏—Ö —É —Ç–∞–±–ª–∏—Ü—ñ users
SELECT * FROM users;

4Ô∏è‚É£ –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —Ç–∞–±–ª–∏—Ü—ñ
\d users


üí° –ü–æ—Ä–∞–¥–∞: –Ω–∞ Ne–æ–Ω –º–æ–∂–Ω–∞ –ø—ñ–¥–∫–ª—é—á–∞—Ç–∏—Å—è —ñ —á–µ—Ä–µ–∑ GUI –∫–ª—ñ—î–Ω—Ç–∏ (DBeaver, TablePlus, pgAdmin). –ü—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤–ª—è—î—à —Ç–æ–π —Å–∞–º–∏–π SQLALCHEMY_DATABASE_URL.

‚úÖ –ö–†–û–ö 10. –¢–µ—Å—Ç—É—î–º–æ API

–ü–æ–¥–∏–≤–∏—Å—å URL —Å–≤–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É:

flyctl info


–í—ñ–Ω –±—É–¥–µ —â–æ—Å—å —Ç–∏–ø—É:

https://cold-dew-5968.fly.dev


–í—ñ–¥–∫—Ä–∏–π —É –±—Ä–∞—É–∑–µ—Ä—ñ:

https://cold-dew-5968.fly.dev/docs


–¢–∞–º –º–∞—î –±—É—Ç–∏ —Ç–≤—ñ–π Swagger.

üî• –©–û –¢–ï–ü–ï–† –¢–†–ï–ë–ê –ó–†–û–ë–ò–¢–ò –¢–û–ë–Ü?

–ù–∞–ø–∏—à–∏ –º–µ–Ω—ñ:

1Ô∏è‚É£ –í–∏–≤—ñ–¥ –∫–æ–º–∞–Ω–¥–∏:
flyctl apps list

2Ô∏è‚É£ –í–∏–≤—ñ–¥ –∫–æ–º–∞–Ω–¥–∏:
flyctl secrets list






‚úÖ –©–æ —Ç—Ä–µ–±–∞ –∑—Ä–æ–±–∏—Ç–∏ –ø—Ä—è–º–æ –∑–∞—Ä–∞–∑
–ö—Ä–æ–∫ 1. –ü–æ–¥–∏–≤–∏—Ç–∏—Å—è –≤—Å—ñ –º–∞—à–∏–Ω–∏

–í–∏–∫–æ–Ω–∞–π:

flyctl machines list --app photoshare-project-1


–¢–∞–º —Ç–∏ –ø–æ–±–∞—á–∏—à –º–∞—à–∏–Ω–∏ —Ç–∏–ø—É:

–æ–¥–Ω–∞ –æ—Å–Ω–æ–≤–Ω–∞ (app)

–æ–¥–Ω–∞ –∑–∞–≤–∏—Å–ª–∞ release-–º–∞—à–∏–Ω–∞ (‚Äúred-tree-7511‚Äù)

–ö—Ä–æ–∫ 2. –í–∏–¥–∞–ª–∏—Ç–∏ –∑–∞–≤–∏—Å–ª—É release-–º–∞—à–∏–Ω—É

–ù–∞–ø—Ä–∏–∫–ª–∞–¥:

flyctl machines destroy <machine-id> --app photoshare-project-1


ID —Ç–∏ –ø–æ–±–∞—á–∏—à —É —Å–ø–∏—Å–∫—É.

–ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π ‚Äî —Ü–µ –Ω–µ –≤–∏–¥–∞–ª—è—î —Ç–≤—ñ–π –¥–æ–¥–∞—Ç–æ–∫, —Ü–µ –ª–∏—à–µ —á–∏—Å—Ç–∏—Ç—å "—Ç–∏–º—á–∞—Å–æ–≤—ñ" –º–∞—à–∏–Ω–∏.

–ö—Ä–æ–∫ 3. –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑ –∑—Ä–æ–±–∏—Ç–∏ –¥–µ–ø–ª–æ–π
flyctl deploy --app photoshare-project-1

‚ùó –í–ê–ñ–õ–ò–í–û ‚Äî –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ—î–º —Ç—Ä–µ–±–∞ –≤–∏–º–∫–Ω—É—Ç–∏ release-–∫–æ–º–∞–Ω–¥—É

–£ –Ω–∞—Å –∑–∞—Ä–∞–∑ –≤ fly.toml —î:

[deploy]
  release_command = "alembic upgrade head"


–Ü —è–∫—â–æ –º—ñ–≥—Ä–∞—Ü—ñ—ó –ø–∞–¥–∞—é—Ç—å ‚Äî –¥–µ–ø–ª–æ–π —Ç–µ–∂ –ø–∞–¥–∞—î.

üëâ –î–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ –∫—Ä–∞—â–µ –Ω–∞ —Ü–µ–π —á–∞—Å –≤–∏–º–∫–Ω—É—Ç–∏ release_command, –∞ –º—ñ–≥—Ä–∞—Ü—ñ—ó –∑–∞–ø—É—Å–∫–∞—Ç–∏ –≤—Ä—É—á–Ω—É —á–µ—Ä–µ–∑ SSH.

–¢–∏ —Ö–æ—á–µ—à, —â–æ–± —è:

A) –í–∏–º–∫–Ω—É–ª–∞ release command —É —Ñ–∞–π–ª—ñ fly.toml —ñ –¥–∞–ª–∞ –æ–Ω–æ–≤–ª–µ–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç?

—á–∏

B) –ü–æ—è—Å–Ω–∏–ª–∞, —è–∫ –∑–∞–ø—É—Å–∫–∞—Ç–∏ alembic –≤—Ä—É—á–Ω—É –ø—ñ—Å–ª—è –¥–µ–ø–ª–æ—é?
‚úîÔ∏è –î–∞–ª—ñ –Ω–∞–º —Ç—Ä–µ–±–∞ –∑—Ä–æ–±–∏—Ç–∏:

–í–∏—á–∏—Å—Ç–∏—Ç–∏ –∑–∞–≤–∏—Å–ª—ñ –º–∞—à–∏–Ω–∏

–ü–æ–≤—Ç–æ—Ä–∏—Ç–∏ –¥–µ–ø–ª–æ–π

–ó–∞–π—Ç–∏ –ø–æ SSH —ñ –≤–∏–∫–æ–Ω–∞—Ç–∏:

alembic upgrade head


–ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ —Å–∞–π—Ç –ø—Ä–∞—Ü—é—î

–ü–∏—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–º–∞–Ω–¥–∏:

flyctl machines list --app photoshare-project-1